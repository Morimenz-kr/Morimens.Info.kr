<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="referrer" content="no-referrer">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ë¯¸ì‚¬ê·¸ ëŒ€í•™ í•œêµ­ ìº í¼ìŠ¤</title>

    <link rel="icon" type="image/webp" href="images/smile_Ramona.webp">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://morimenz-kr.github.io/Morimens.Info.kr/">
    <meta property="og:title" content="ë¯¸ì‚¬ê·¸ ëŒ€í•™ í•œêµ­ ìº í¼ìŠ¤">
    <meta property="og:description" content="ìºë¦­í„° ê³µëµ, í™˜ëª½ì‹¬ì , ìœµì¬ê¸ˆêµ¬, ì¿ í° ë“± Morimensì˜ ëª¨ë“  ì •ë³´ë¥¼ í•œëˆˆì— í™•ì¸í•˜ì„¸ìš”.">
    <meta property="og:image" content="https://morimenz-kr.github.io/Morimens.Info.kr/images/background.png">

    <script src="config/config.js"></script>

    <script>
        loadCSS('css/common.css');
        loadCSS('css/components.css');
        loadCSS('css/pages/landing.css');
        loadCSS('css/responsive.css');
    </script>
</head>

<body>
<div class="bg-image"></div>
<div class="background-overlay"></div>

<div class="landing-container">
    <header>
        <h1>ë¯¸ì‚¬ê·¸ ëŒ€í•™ í•œêµ­ ìº í¼ìŠ¤</h1>
    </header>

    <div class="banner-container">
        <div class="banner-track" id="banner-track">

            <a href="https://www.youtube.com/@morimensofficial" target="_blank" class="banner-slide">
                <img src="images/banner_youtube.png" alt="ìœ íŠœë¸Œ ë°°ë„ˆ">
            </a>

            <a href="https://discord.com/invite/VJhuUdHxmc/" target="_blank" class="banner-slide">
                <img src="images/Banner_Discord.png" alt="ë””ìŠ¤ì½”ë“œ ë°°ë„ˆ">
            </a>

        </div>

        <button class="arrow left" id="prev-btn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                 stroke-linecap="round" stroke-linejoin="round">
                <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
        </button>
        <button class="arrow right" id="next-btn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                 stroke-linecap="round" stroke-linejoin="round">
                <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
        </button>

        <div class="dots-container" id="dots-container"></div>
    </div>

    <div class="menu-grid">
        <a href="links.html?category=event" class="menu-wrapper wide-menu">
            <div class="menu-item">ğŸ‰</div>
            <p class="menu-label">ì§„í–‰ì¤‘ì¸ ì´ë²¤íŠ¸ ê´€ë ¨ ì •ë³´</p>
        </a>

        <a href="links.html?category=weekly_yungjae" class="menu-wrapper wide-menu">
            <div class="menu-item">ğŸ”¥</div>
            <p class="menu-label">ì§„í–‰ì¤‘ì¸ ìœµì¬ ê¸ˆêµ¬ íŒ</p>
        </a>

        <a href="list.html" class="menu-wrapper">
            <div class="menu-item">â­</div>
            <p class="menu-label">ê°ì„±ì²´ ì •ë³´</p>
        </a>
        <a href="links.html?category=faction" class="menu-wrapper">
            <div class="menu-item">ğŸ­</div>
            <p class="menu-label">ê³„ì—­ë³„ ì •ë³´</p>
        </a>
        <a href="links.html?category=dreamdive" class="menu-wrapper">
            <div class="menu-item">ğŸŒŠ</div>
            <p class="menu-label">í™˜ëª½ì‹¬ì  ì •ë³´</p>
        </a>
        <a href="links.html?category=weapon" class="menu-wrapper">
            <div class="menu-item">ğŸ—¡ï¸</div>
            <p class="menu-label">ìœµì¬ê¸ˆêµ¬ ì •ë³´</p>
        </a>
        <a href="links.html?category=system" class="menu-wrapper">
            <div class="menu-item">âš™ï¸</div>
            <p class="menu-label">ì‹œìŠ¤í…œ ì •ë³´</p>
        </a>
        <a href="links.html?category=covenant" class="menu-wrapper">
            <div class="menu-item">ğŸ“œ</div>
            <p class="menu-label">ë¹„ë°€ê³„ì•½ ì •ë³´</p>
        </a>
        <a href="links.html?category=myeongryun" class="menu-wrapper">
            <div class="menu-item">ğŸ”˜</div>
            <p class="menu-label">ëª…ë¥œ ì •ë³´</p>
        </a>
        <a href="links.html?category=silverkey" class="menu-wrapper">
            <div class="menu-item">ğŸ”‘</div>
            <p class="menu-label">ì€ì—´ì‡  ì •ë³´</p>
        </a>
        <a href="links.html?category=chess" class="menu-wrapper">
            <div class="menu-item">â™Ÿï¸</div>
            <p class="menu-label">í˜ì´ì¦ˆ ì²´ìŠ¤</p>
        </a>
        <a href="links.html?category=code" class="menu-wrapper">
            <div class="menu-item">ğŸŸï¸</div>
            <p class="menu-label">êµí™˜ ì½”ë“œ</p>
        </a>
        <a href="links.html?category=newbie" class="menu-wrapper">
            <div class="menu-item">ğŸ£</div>
            <p class="menu-label">ë‰´ë¹„ íŒ</p>
        </a>
        <a href="links.html?category=etc" class="menu-wrapper">
            <div class="menu-item">ğŸ¸</div>
            <p class="menu-label">ê¸°íƒ€</p>
        </a>
    </div>

    <footer>
        &copy; 2025 ë¯¸ì‚¬ê·¸ ëŒ€í•™ í•œêµ­ ìº í¼ìŠ¤ |
        <span id="open-patch-modal" class="patch-link">Patch Notes</span> |
        <a href="https://litt.ly/mythag.univ.kr" target="_blank" class="sponsor-link"> í›„ì›í•˜ê¸°(ë¦¬í‹€ë¦¬) |</a>
        <a href="https://buymeacoffee.com/Mythag.Univ.kr" target="_blank" rel="noopener noreferrer" class="sponsor-link"> í›„ì›í•˜ê¸° (Buy me a Coffee)</a>
    </footer>
</div>

<div id="patch-modal" class="modal-overlay">
    <div class="modal-content">
        <div class="modal-header">
            <h2>ğŸ“¢ ì—…ë°ì´íŠ¸ ë‚´ì—­</h2>
            <button id="close-patch-modal" class="close-btn">&times;</button>
        </div>
        <div class="patch-list" id="patch-list-content">
            <p style="text-align:center; color:#777;">ë¡œë”© ì¤‘...</p>
        </div>
    </div>
</div>

<div id="report-modal" class="modal-overlay">
    <div class="modal-content">
        <h2 class="form-title">ğŸš¨ ë²„ê·¸ ì œë³´ or í”¼ë“œë°±</h2>
        <p style="color:#aaa; font-size:0.9em;">ì œë³´í•˜ì‹¤ ë‚´ìš©ì„ ì ì–´ì£¼ì„¸ìš”. ê°œë°œìì—ê²Œ ì¦‰ì‹œ ì•Œë¦¼ì´ ì „ì†¡ë©ë‹ˆë‹¤.</p>

        <form id="bug-report-form" action="javascript:void(0);" onsubmit="sendToDiscord(event)" method="POST">

            <label for="reporter-email" class="form-field-label">íŒ¨ì¹˜ë…¸íŠ¸ì— ì˜¬ë¼ê°ˆ ë‹‰ë„¤ì„ (ì„ íƒ)</label>
            <input type="text" id="reporter-email" name="_replyto" class="form-input"
                   placeholder="íŒ¨ì¹˜ë…¸íŠ¸ì— ì–¸ê¸‰ì„ ì›í•˜ì‹œë©´ ì ì–´ì£¼ì„¸ìš”.">

            <label for="report-message" class="form-field-label">
                ì œë³´í•  ë‚´ìš© (ë²„ê·¸ or í”¼ë“œë°±) (í•„ìˆ˜)
                <span style="display:block; margin-top:5px; font-size:0.9em; color:#ff9f43; font-weight:normal;">
                        â€» íŠ¹ì • ê²Œì‹œê¸€/ì •ë³´ ê´€ë ¨ ì œë³´ë¼ë©´, <u>í•´ë‹¹ ê¸€ì˜ ë§í¬</u>ë¥¼ ë³¸ë¬¸ì— ê¼­ ì ì–´ì£¼ì„¸ìš”!
                    </span>
            </label>
            <textarea id="report-message" name="message" class="form-textarea" required
                      placeholder="ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”. (ì˜ˆ: 'XX ìºë¦­í„° ê³µëµ ë§í¬ê°€ ì•ˆ ì—´ë ¤ìš”', 'ì´ ë§í¬(URL) ì ‘ì†ì´ ì•ˆ ë¼ìš”')"></textarea>

            <input type="hidden" name="report_source_url" id="report-source-url">
            <button type="submit" class="form-submit-btn">ì œë³´ ë³´ë‚´ê¸°</button>
            <p id="modal-form-status" style="margin-top: 15px; color:#ffc107; text-align:center; display: none;">ì „ì†¡ ì¤‘...</p>
        </form>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- ë°°ë„ˆ ìŠ¬ë¼ì´ë” ë¡œì§ ---
        const track = document.getElementById('banner-track');
        const originalSlides = Array.from(track.children);
        const nextBtn = document.getElementById('next-btn');
        const prevBtn = document.getElementById('prev-btn');
        const dotsContainer = document.getElementById('dots-container');

        const slideCount = originalSlides.length;
        let currentIndex = 1;
        let autoSlideInterval;
        let isTransitioning = false;

        const firstClone = originalSlides[0].cloneNode(true);
        const lastClone = originalSlides[slideCount - 1].cloneNode(true);

        track.appendChild(firstClone);
        track.insertBefore(lastClone, originalSlides[0]);

        track.style.transform = `translateX(-100%)`;

        originalSlides.forEach((_, idx) => {
            const dot = document.createElement('div');
            dot.classList.add('dot');
            if (idx === 0) dot.classList.add('active');
            dot.addEventListener('click', () => {
                resetTimer();
                moveToSlide(idx + 1);
            });
            dotsContainer.appendChild(dot);
        });
        const dots = Array.from(dotsContainer.children);

        function updateDots(index) {
            let realIndex = index - 1;
            if (realIndex < 0) realIndex = slideCount - 1;
            if (realIndex >= slideCount) realIndex = 0;

            dots.forEach(d => d.classList.remove('active'));
            dots[realIndex].classList.add('active');
        }

        function moveToSlide(index) {
            if (isTransitioning) return;
            isTransitioning = true;

            track.style.transition = 'transform 0.5s ease-in-out';
            track.style.transform = `translateX(-${index * 100}%)`;
            currentIndex = index;
            updateDots(currentIndex);
        }

        track.addEventListener('transitionend', () => {
            isTransitioning = false;
            if (currentIndex === slideCount + 1) {
                track.style.transition = 'none';
                currentIndex = 1;
                track.style.transform = `translateX(-100%)`;
            }
            if (currentIndex === 0) {
                track.style.transition = 'none';
                currentIndex = slideCount;
                track.style.transform = `translateX(-${slideCount * 100}%)`;
            }
        });

        function resetTimer() {
            clearInterval(autoSlideInterval);
            autoSlideInterval = setInterval(() => moveToSlide(currentIndex + 1), 5000);
        }

        nextBtn.addEventListener('click', () => {
            resetTimer();
            moveToSlide(currentIndex + 1);
        });

        prevBtn.addEventListener('click', () => {
            resetTimer();
            moveToSlide(currentIndex - 1);
        });

        resetTimer();

        const bannerContainer = document.querySelector('.banner-container');
        bannerContainer.addEventListener('mouseenter', () => clearInterval(autoSlideInterval));
        bannerContainer.addEventListener('mouseleave', () => resetTimer());


        // --- íŒ¨ì¹˜ë…¸íŠ¸ ë¡œì§ ---
        const modal = document.getElementById('patch-modal');
        const openBtn = document.getElementById('open-patch-modal');
        const closeBtn = document.getElementById('close-patch-modal');
        const listContent = document.getElementById('patch-list-content');

        async function loadPatchNotes() {
            try {
                const ts = new Date().getTime();
                const res = await fetch(`data/patch_notes.json?t=${ts}`);
                if (!res.ok) throw new Error('Load failed');
                const data = await res.json();
                let html = '';
                data.forEach(item => {
                    let changesHtml = item.changes.map(c => `<li>${c}</li>`).join('');
                    html += `<div class="patch-item"><span class="patch-ver">${item.version}</span><span class="patch-date">${item.date}</span><ul class="patch-desc">${changesHtml}</ul></div><hr style="border-color:#333; opacity:0.5;">`;
                });
                listContent.innerHTML = html.replace(/\<hr[^\>]*\>(?=[^\<]*$)/, '');

                if (data.length > 0) {
                    openBtn.textContent = `Patch Notes ${data[0].version}`;
                }
            } catch (e) { listContent.innerHTML = 'ë¡œë“œ ì‹¤íŒ¨'; }
        }

        loadPatchNotes();

        openBtn.addEventListener('click', () => { modal.classList.add('show'); });
        closeBtn.addEventListener('click', () => modal.classList.remove('show'));
        modal.addEventListener('click', (e) => { if (e.target === modal) modal.classList.remove('show'); });

        // ëª¨ë‹¬ ë‹«ê¸° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë°”ì¸ë”©
        const reportModal = document.getElementById('report-modal');
        if (reportModal) {
            reportModal.addEventListener('click', (e) => {
                if (e.target === reportModal) {
                    reportModal.classList.remove('show');
                }
            });
        }
    });

    // --- ì‹ ê³  ëª¨ë‹¬ í•¨ìˆ˜ ---
    function openReportModal() {
        const modal = document.getElementById('report-modal');
        const modalStatus = document.getElementById('modal-form-status');
        const sourceUrlInput = document.getElementById('report-source-url');

        if (modalStatus) {
            modalStatus.style.display = 'none';
            modalStatus.textContent = 'ì œë³´ë¥¼ ì „ì†¡ ì¤‘ì…ë‹ˆë‹¤...';
            modalStatus.style.color = '#ffc107';
        }

        if (sourceUrlInput) {
            sourceUrlInput.value = window.location.href;
        }

        modal.classList.add('show');
    }

    async function sendToDiscord(event) {
        event.preventDefault();
        const form = event.target;
        const formData = new FormData(form);
        const modalStatus = document.getElementById('modal-form-status');
        const modal = document.getElementById('report-modal');

        if (modalStatus) {
            modalStatus.style.display = 'block';
            modalStatus.textContent = 'ì œë³´ë¥¼ ì „ì†¡ ì¤‘ì…ë‹ˆë‹¤...';
            modalStatus.style.color = '#ffc107';
        }

        const reporterEmail = formData.get('_replyto') || 'ìµëª…(Anonymous)';
        const message = formData.get('message');
        const sourceUrl = formData.get('report_source_url') || window.location.href;

        const payload = {
            username: "Morimens Wiki Bot",
            embeds: [{
                title: "ğŸ“© ìƒˆë¡œìš´ ì œë³´ê°€ ë„ì°©í–ˆìŠµë‹ˆë‹¤!",
                description: "ìœ„í‚¤ì—ì„œ ìœ ì € í”¼ë“œë°±/ë²„ê·¸ ì œë³´ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.",
                color: 0xFF9F43,
                fields: [
                    { name: "ğŸ‘¤ ì œë³´ì", value: `\`${reporterEmail}\``, inline: true },
                    { name: "ğŸ“ ë°œìƒ í˜ì´ì§€", value: `[ë°”ë¡œê°€ê¸°(Click)](${sourceUrl})`, inline: true },
                    { name: "ğŸ“ ìƒì„¸ ë‚´ìš©", value: `>>> ${message}`, inline: false }
                ],
                footer: { text: "Morimens Wiki Report System" },
                timestamp: new Date().toISOString()
            }]
        };

        try {
            const webhookUrl = (typeof CONFIG !== 'undefined') ? CONFIG.DISCORD_WEBHOOK_URL : '';
            if(!webhookUrl) throw new Error("Config Error");

            await fetch(webhookUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });

            if (modalStatus) {
                modalStatus.textContent = "âœ… ì „ì†¡ ì™„ë£Œ! ê°ì‚¬í•©ë‹ˆë‹¤.";
                modalStatus.style.color = "#2ecc71";
            }
            form.reset();
            setTimeout(() => {
                modal.classList.remove('show');
                if (modalStatus) {
                    modalStatus.style.display = 'none';
                    modalStatus.textContent = 'ì œë³´ë¥¼ ì „ì†¡ ì¤‘ì…ë‹ˆë‹¤...';
                    modalStatus.style.color = '#ffc107';
                }
            }, 1500);
        } catch (error) {
            console.error(error);
            if (modalStatus) {
                modalStatus.textContent = 'âŒ ì„¤ì • ì˜¤ë¥˜ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì…ë‹ˆë‹¤.';
                modalStatus.style.color = "#e74c3c";
            }
        }
    }
</script>
<button class="floating-report-btn" onclick="openReportModal()"
        title="ë²„ê·¸ ì‹ ê³ ">
    ğŸš¨
</button>
</body>
</html>