<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="referrer" content="no-referrer">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ë¯¸ì‚¬ê·¸ ëŒ€í•™ í•œêµ­ ìº í¼ìŠ¤</title>

    <link rel="icon" type="image/webp" href="images/smile_Ramona.webp">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://morimenz-kr.github.io/Morimens.Info.kr/">
    <meta property="og:title" content="ë¯¸ì‚¬ê·¸ ëŒ€í•™ í•œêµ­ ìº í¼ìŠ¤ - ì¢…í•© ê°€ì´ë“œ">
    <meta property="og:description" content="ìºë¦­í„° ê³µëµ, í™˜ëª½ì‹¬ì , ìœµì¬ê¸ˆêµ¬, ì¿ í° ë“± ë¯¸ì‚¬ê·¸ ëŒ€í•™ì˜ ëª¨ë“  ì •ë³´ë¥¼ í•œëˆˆì— í™•ì¸í•˜ì„¸ìš”.">
    <meta property="og:image" content="https://morimenz-kr.github.io/Morimens.Info.kr/images/background.png">

    <!-- CSS íŒŒì¼ ì—°ê²° -->
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/pages/landing.css">
    <link rel="stylesheet" href="css/responsive.css">
    <!-- Config íŒŒì¼ ë¡œë“œ -->
    <script src="config/config.js"></script>
</head>

<body>
    <div class="bg-image"></div>
    <div class="background-overlay"></div>

    <div class="landing-container">
        <header>
            <h1>ë¯¸ì‚¬ê·¸ ëŒ€í•™ í•œêµ­ ìº í¼ìŠ¤</h1>
        </header>

        <div class="banner-container">
            <div class="banner-track" id="banner-track">

                <a href="https://www.youtube.com/@morimensofficial" target="_blank" class="banner-slide">
                    <img src="images/banner_youtube.png" alt="ìœ íŠœë¸Œ ë°°ë„ˆ">
                </a>

                <a href="https://discord.com/invite/VJhuUdHxmc/" target="_blank" class="banner-slide">
                    <img src="images/Banner_Discord.png" alt="ë””ìŠ¤ì½”ë“œ ë°°ë„ˆ">
                </a>

            </div>

            <button class="arrow left" id="prev-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
            </button>
            <button class="arrow right" id="next-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
            </button>

            <div class="dots-container" id="dots-container"></div>
        </div>

        <div class="menu-grid-wrapper">
            <div class="menu-grid">
                <a href="list.html" class="menu-wrapper">
                    <div class="menu-item">â­</div>
                    <p class="menu-label">ê°ì„±ì²´ ì •ë³´</p>
                </a>
                <a href="links.html?category=faction" class="menu-wrapper">
                    <div class="menu-item">ğŸ­</div>
                    <p class="menu-label">ê³„ì—­ë³„ ì •ë³´</p>
                </a>
                <a href="links.html?category=dreamdive" class="menu-wrapper">
                    <div class="menu-item">ğŸŒŠ</div>
                    <p class="menu-label">í™˜ëª½ì‹¬ì  ì •ë³´</p>
                </a>
                <a href="links.html?category=weapon" class="menu-wrapper">
                    <div class="menu-item">ğŸ—¡ï¸</div>
                    <p class="menu-label">ìœµì¬ê¸ˆêµ¬ ì •ë³´</p>
                </a>

                <a href="links.html?category=system" class="menu-wrapper">
                    <div class="menu-item">âš™ï¸</div>
                    <p class="menu-label">ì‹œìŠ¤í…œ ì •ë³´</p>
                </a>
                <a href="links.html?category=covenant" class="menu-wrapper">
                    <div class="menu-item">ğŸ“œ</div>
                    <p class="menu-label">ë¹„ë°€ê³„ì•½ ì •ë³´</p>
                </a>
                <a href="links.html?category=myeongryun" class="menu-wrapper">
                    <div class="menu-item">ğŸ”˜</div>
                    <p class="menu-label">ëª…ë¥œ ì •ë³´</p>
                </a>
                <a href="links.html?category=silverkey" class="menu-wrapper">
                    <div class="menu-item">ğŸ”‘</div>
                    <p class="menu-label">ì€ì—´ì‡  ì •ë³´</p>
                </a>

                <a href="links.html?category=chess" class="menu-wrapper">
                    <div class="menu-item">â™Ÿï¸</div>
                    <p class="menu-label">í˜ì´ì¦ˆ ì²´ìŠ¤</p>
                </a>
                <a href="links.html?category=code" class="menu-wrapper">
                    <div class="menu-item">ğŸŸï¸</div>
                    <p class="menu-label">êµí™˜ ì½”ë“œ</p>
                </a>
                <a href="links.html?category=newbie" class="menu-wrapper">
                    <div class="menu-item">ğŸ£</div>
                    <p class="menu-label">ë‰´ë¹„ íŒ</p>
                </a>
                <a href="links.html?category=etc" class="menu-wrapper">
                    <div class="menu-item">ğŸ¸</div>
                    <p class="menu-label">ê¸°íƒ€</p>
                </a>
            </div>
        </div>

        <footer>
            &copy; 2025 ë¯¸ì‚¬ê·¸ ëŒ€í•™ í•œêµ­ ìº í¼ìŠ¤ |
            <span id="open-patch-modal" class="patch-link">Patch Notes</span> |
            <a href="https://buymeacoffee.com/mythag.univ.kr" target="_blank" class="sponsor-link">â˜• í›„ì›í•˜ê¸°</a>
        </footer>
    </div>

    <div id="patch-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ“¢ ì—…ë°ì´íŠ¸ ë‚´ì—­</h2>
                <button id="close-patch-modal" class="close-btn">&times;</button>
            </div>
            <div class="patch-list" id="patch-list-content">
                <p style="text-align:center; color:#777;">ë¡œë”© ì¤‘...</p>
            </div>
        </div>
    </div>

    <div id="report-modal" class="modal-overlay">
        <div class="modal-content">
            <h2 class="form-title">ğŸš¨ ë²„ê·¸ ì œë³´ or í”¼ë“œë°±</h2>
            <p style="color:#aaa; font-size:0.9em;">ì œë³´í•˜ì‹¤ ë‚´ìš©ì„ ì ì–´ì£¼ì„¸ìš”. ê°œë°œìì—ê²Œ ì¦‰ì‹œ ì•Œë¦¼ì´ ì „ì†¡ë©ë‹ˆë‹¤.</p>

            <form id="bug-report-form" action="javascript:void(0);" onsubmit="sendToDiscord(event)" method="POST">

                <label for="reporter-email" class="form-field-label">íŒ¨ì¹˜ë…¸íŠ¸ì— ì˜¬ë¼ê°ˆ ë‹‰ë„¤ì„ (ì„ íƒ)</label>
                <input type="text" id="reporter-email" name="_replyto" class="form-input"
                    placeholder="íŒ¨ì¹˜ë…¸íŠ¸ì— ì–¸ê¸‰ì„ ì›í•˜ì‹œë©´ ì ì–´ì£¼ì„¸ìš”.">

                <label for="report-message" class="form-field-label">ì œë³´í•  ë‚´ìš© (ë²„ê·¸ or í”¼ë“œë°±) (í•„ìˆ˜)</label>
                <textarea id="report-message" name="message" class="form-textarea" required
                    placeholder="ì œë³´í•˜ì‹¤ ë‚´ìš©ì„ ì ì–´ì£¼ì„¸ìš”."></textarea>

                <input type="hidden" name="report_source_url" id="report-source-url">
                <input type="hidden" name="_subject" value="[Morimens Wiki] ë²„ê·¸/í”¼ë“œë°± ì ‘ìˆ˜">

                <button type="submit" class="form-submit-btn">ì œë³´ ë³´ë‚´ê¸°</button>
                <p id="modal-form-status" style="margin-top: 15px; color:#ffc107; text-align:center; display: none;">ì „ì†¡
                    ì¤‘...</p>
            </form>

        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- ë°°ë„ˆ ìŠ¬ë¼ì´ë” ë¡œì§ ---
            const track = document.getElementById('banner-track');
            const originalSlides = Array.from(track.children);
            const nextBtn = document.getElementById('next-btn');
            const prevBtn = document.getElementById('prev-btn');
            const dotsContainer = document.getElementById('dots-container');

            const slideCount = originalSlides.length;
            let currentIndex = 1;
            let autoSlideInterval;
            let isTransitioning = false;

            const firstClone = originalSlides[0].cloneNode(true);
            const lastClone = originalSlides[slideCount - 1].cloneNode(true);

            track.appendChild(firstClone);
            track.insertBefore(lastClone, originalSlides[0]);

            track.style.transform = `translateX(-100%)`;

            originalSlides.forEach((_, idx) => {
                const dot = document.createElement('div');
                dot.classList.add('dot');
                if (idx === 0) dot.classList.add('active');
                dot.addEventListener('click', () => {
                    resetTimer();
                    moveToSlide(idx + 1);
                });
                dotsContainer.appendChild(dot);
            });
            const dots = Array.from(dotsContainer.children);

            function updateDots(index) {
                let realIndex = index - 1;
                if (realIndex < 0) realIndex = slideCount - 1;
                if (realIndex >= slideCount) realIndex = 0;

                dots.forEach(d => d.classList.remove('active'));
                dots[realIndex].classList.add('active');
            }

            function moveToSlide(index) {
                if (isTransitioning) return;
                isTransitioning = true;

                track.style.transition = 'transform 0.5s ease-in-out';
                track.style.transform = `translateX(-${index * 100}%)`;
                currentIndex = index;
                updateDots(currentIndex);
            }

            track.addEventListener('transitionend', () => {
                isTransitioning = false;
                if (currentIndex === slideCount + 1) {
                    track.style.transition = 'none';
                    currentIndex = 1;
                    track.style.transform = `translateX(-100%)`;
                }
                if (currentIndex === 0) {
                    track.style.transition = 'none';
                    currentIndex = slideCount;
                    track.style.transform = `translateX(-${slideCount * 100}%)`;
                }
            });

            function resetTimer() {
                clearInterval(autoSlideInterval);
                autoSlideInterval = setInterval(() => moveToSlide(currentIndex + 1), 5000);
            }

            nextBtn.addEventListener('click', () => {
                resetTimer();
                moveToSlide(currentIndex + 1);
            });

            prevBtn.addEventListener('click', () => {
                resetTimer();
                moveToSlide(currentIndex - 1);
            });

            resetTimer();

            const bannerContainer = document.querySelector('.banner-container');
            bannerContainer.addEventListener('mouseenter', () => clearInterval(autoSlideInterval));
            bannerContainer.addEventListener('mouseleave', () => resetTimer());


            // --- íŒ¨ì¹˜ë…¸íŠ¸ ë¡œì§ ---
            const modal = document.getElementById('patch-modal');
            const openBtn = document.getElementById('open-patch-modal');
            const closeBtn = document.getElementById('close-patch-modal');
            const listContent = document.getElementById('patch-list-content');

            async function loadPatchNotes() {
                try {
                    const ts = new Date().getTime();
                    const res = await fetch(`data/patch_notes.json?t=${ts}`);
                    if (!res.ok) throw new Error('Load failed');
                    const data = await res.json();
                    let html = '';
                    data.forEach(item => {
                        let changesHtml = item.changes.map(c => `<li>${c}</li>`).join('');
                        html += `<div class="patch-item"><span class="patch-ver">${item.version}</span><span class="patch-date">${item.date}</span><ul class="patch-desc">${changesHtml}</ul></div><hr style="border-color:#333; opacity:0.5;">`;
                    });
                    listContent.innerHTML = html.replace(/\<hr[^\>]*\>(?=[^\<]*$)/, '');

                    if (data.length > 0) {
                        openBtn.textContent = `Patch Notes ${data[0].version}`;
                    }
                } catch (e) { listContent.innerHTML = 'ë¡œë“œ ì‹¤íŒ¨'; }
            }

            loadPatchNotes();

            openBtn.addEventListener('click', () => { modal.classList.add('show'); });
            closeBtn.addEventListener('click', () => modal.classList.remove('show'));
            modal.addEventListener('click', (e) => { if (e.target === modal) modal.classList.remove('show'); });
        });

        // ëª¨ë‹¬ ì—´ê¸° ë° ì´ˆê¸°í™” í•¨ìˆ˜
        function openReportModal() {
            const modal = document.getElementById('report-modal');
            const modalStatus = document.getElementById('modal-form-status');
            const sourceUrlInput = document.getElementById('report-source-url');

            // ìƒíƒœ ì´ˆê¸°í™”
            if (modalStatus) {
                modalStatus.style.display = 'none';
                modalStatus.textContent = 'ì œë³´ë¥¼ ì „ì†¡ ì¤‘ì…ë‹ˆë‹¤...';
            }

            // í˜„ì¬ URL ìë™ ì…ë ¥
            if (sourceUrlInput) {
                sourceUrlInput.value = window.location.href;
            }

            // ëª¨ë‹¬ ì—´ê¸°
            modal.classList.add('show');
        }

        // Discord Webhook ì „ì†¡ í•¨ìˆ˜ (Embed í˜•ì‹)
        async function sendToDiscord(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);
            const modalStatus = document.getElementById('modal-form-status');

            if (modalStatus) {
                modalStatus.style.display = 'block';
                modalStatus.textContent = 'ì œë³´ë¥¼ ì „ì†¡ ì¤‘ì…ë‹ˆë‹¤...';
            }

            const reporterEmail = formData.get('_replyto') || 'N/A';
            const message = formData.get('message');
            const sourceUrl = formData.get('report_source_url') || window.location.href;

            const payload = {
                username: "Morimens Wiki Reporter",
                embeds: [{
                    title: "ğŸš¨ ì‹ ê·œ ë²„ê·¸/í”¼ë“œë°± ì œë³´ ì ‘ìˆ˜",
                    color: 15777040,
                    fields: [
                        { name: "ì œë³´ì ë‹‰ë„¤ì„", value: reporterEmail, inline: false },
                        { name: "ì œë³´ í˜ì´ì§€", value: `[ë§í¬](${sourceUrl})`, inline: false },
                        { name: "ìƒì„¸ ë‚´ìš©", value: message, inline: false },
                    ],
                    timestamp: new Date().toISOString()
                }]
            };

            try {
                const response = await fetch(CONFIG.DISCORD_WEBHOOK_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                // Discord Webhookì€ 204 No Content ì‘ë‹µì„ ì£¼ë¯€ë¡œ response ì²´í¬ ë¶ˆê°€
                // fetchê°€ ì„±ê³µí•˜ë©´ ì „ì†¡ëœ ê²ƒìœ¼ë¡œ ê°„ì£¼
                if (modalStatus) {
                    modalStatus.textContent = "âœ… ì œë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤! ê°ì‚¬í•©ë‹ˆë‹¤.";
                }
                form.reset();
                // ì„±ê³µ ë©”ì‹œì§€ë¥¼ 2ì´ˆ ë™ì•ˆ ë³´ì—¬ì¤€ í›„ ëª¨ë‹¬ ë‹«ê¸°
                setTimeout(() => {
                    document.getElementById('report-modal').classList.remove('show');
                    if (modalStatus) {
                        modalStatus.style.display = 'none';
                        modalStatus.textContent = 'ì œë³´ë¥¼ ì „ì†¡ ì¤‘ì…ë‹ˆë‹¤...';
                    }
                }, 2000);
            } catch (error) {
                const errorMsg = 'âŒ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
                if (modalStatus) {
                    modalStatus.textContent = errorMsg;
                }
            }
        }

        // ëª¨ë‹¬ ë‹«ê¸° ì´ë²¤íŠ¸
        document.addEventListener('DOMContentLoaded', () => {
            const reportModal = document.getElementById('report-modal');
            reportModal.addEventListener('click', (e) => {
                if (e.target === reportModal) {
                    reportModal.classList.remove('show');
                }
            });
        });
    </script>

    <!-- Floating ì‹ ê³  ë²„íŠ¼ -->
    <button class="floating-report-btn" onclick="document.getElementById('report-modal').classList.add('show')"
        title="ë²„ê·¸ ì‹ ê³ ">
        ğŸš¨
    </button>
</body>

</html>